DevStack 설치 가이드 (Ubuntu 22.04.5 LTS, VMware Bridged Network)
본 문서는 VMware Workstation/Player 환경에서 Ubuntu 22.04.5 LTS 서버에 OpenStack DevStack을 설치하는 과정을 상세히 기록합니다. Bridged 네트워크 모드를 사용하여 OpenStack 인스턴스가 외부 네트워크에서 직접 접근 가능하도록 구성합니다.

1. 환경 개요 및 전제 조건
운영체제: Ubuntu Server 22.04.5 LTS (64-bit)

가상화 소프트웨어: VMware Workstation Pro / Player

DevStack 버전: master 브랜치 (최신 개발 버전)

네트워크 모드: Bridged (VMnet0 - Realtek Gaming 2.5GbE Family Controller)

목표: DevStack을 설치하여 OpenStack 대시보드 및 서비스에 외부에서 접근 가능하도록 구성

1.1. VM 최소 사양
DevStack은 상당한 시스템 리소스를 요구합니다. 원활한 작동을 위해 다음 사양을 권장합니다.

CPU: 4 vCPU 이상 (최소 2 vCPU)

RAM: 16GB 이상 (최소 8GB)

디스크 공간: 120GB 이상 (Single File 저장 권장, SSD 권장)

네트워크: VMware에서 Bridged 모드로 설정

1.2. VMware 네트워크 설정 확인
VMware 가상 네트워크 에디터 (Virtual Network Editor)에서 VMnet0이 Bridged 타입으로 설정되어 있고, 호스트 PC의 실제 유선 LAN 카드 (예: Realtek Gaming 2.5GbE Family Controller)에 연결되어 있는지 확인합니다.

"Replicate physical network connection state" 옵션은 체크 상태로 유지합니다.

2. Ubuntu Server 기본 설정
VM에 Ubuntu Server 22.04.5 LTS를 설치하고, 설치 과정에서 생성하는 첫 번째 사용자 계정 이름을 stack으로 지정합니다.

시스템 업데이트:
stack 사용자로 로그인 후 다음 명령어를 실행하여 시스템을 최신 상태로 업데이트합니다.

Bash

sudo apt update
sudo apt upgrade -y
sudo apt dist-upgrade -y
재부팅 (필요시):
커널 업데이트 등이 있었다면 재부팅합니다.

Bash

sudo reboot
재부팅 후 다시 stack 사용자로 로그인합니다.

기본 유틸리티 설치 (선택 사항):

Bash

sudo apt install -y vim screen curl wget git
3. stack 사용자 권한 설정
stack 사용자는 이미 존재하므로 별도로 생성할 필요는 없지만, sudo 권한을 패스워드 없이 사용할 수 있도록 설정하고 DevStack 작업 디렉토리를 준비합니다.

stack 사용자에게 sudo 권한 부여 (패스워드 없이):

Bash

echo "stack ALL=(ALL) NOPASSWD: ALL" | sudo tee /etc/sudoers.d/stack
주의: 이 설정은 개발/테스트 전용 VM에서만 사용해야 합니다.

/opt/stack 디렉토리 생성 및 권한 설정:
DevStack은 /opt/stack 디렉토리에서 작업하는 것을 권장합니다.

Bash

sudo mkdir -p /opt/stack
sudo chown stack:stack /opt/stack
sudo chmod +x /opt/stack
4. DevStack 리포지토리 클론
stack 사용자로 로그인된 상태에서 /opt/stack 디렉토리로 이동하여 DevStack Git 리포지토리를 클론합니다.

Bash

cd /opt/stack
git clone https://opendev.org/openstack/devstack
이 명령어를 통해 /opt/stack/devstack 디렉토리에 DevStack 파일들이 생성됩니다.

5. local.conf 파일 설정 (필수)
DevStack 설치의 핵심 설정 파일입니다. /opt/stack/devstack/local.conf 파일을 생성하고 아래 내용으로 채워 넣습니다.

devstack 디렉토리로 이동:

Bash

cd /opt/stack/devstack
샘플 파일 복사:

Bash

cp samples/local.conf local.conf
local.conf 편집:
vim local.conf 명령어를 사용하여 파일을 열고, 기존 내용을 모두 삭제한 후 아래 내용을 붙여넣습니다.

Ini, TOML

[[local|localrc]]
# All passwords for OpenStack services and dashboard admin user.
# Using the same password for all for convenience in development environments.
ADMIN_PASSWORD=secretopenstack
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD

# Host IP Address: This is the actual IP address of your Ubuntu VM.
# From `ip a` output, it was 222.104.247.38.
HOST_IP=222.104.247.38

# Floating IP Range: This network range will be used for OpenStack instances
# to be accessible from your external physical network.
# Based on nmap scan, 222.104.247.192/28 is recommended to avoid conflicts.
# This subnet provides 14 usable IPs (222.104.247.193 to 222.104.247.206).
FLOATING_RANGE=222.104.247.192/28

# Fixed IP Range: This is the internal network for your OpenStack instances.
# It should be a private IP range (e.g., 10.x.x.x or 172.16.x.x)
# and must NOT conflict with your physical network.
FIXED_RANGE=10.0.0.0/24
FIXED_NETWORK_SIZE=256

# DNS Server: Google Public DNS is a reliable choice for internet resolution.
DNS_SERVER=8.8.8.8

# Enable Horizon (OpenStack Dashboard) to provide a web-based user interface.
enable_service horizon

# Log File Configuration: Helps significantly in debugging if installation issues occur.
# Logs will be saved in /opt/stack/logs/
LOGFILE=/opt/stack/logs/stack.sh.log
SCREEN_LOGDIR=/opt/stack/logs

# Force sudo: Can help resolve certain permission-related issues during installation,
# especially on newer Ubuntu versions.
force_sudo=True

# Swift (Object Storage) Configuration - Recommended for development
# Swift requires a hash value; this can be any string.
SWIFT_HASH=66a3d6b56c1f479c8b4e70ab5c2000f5
# Set replicas to 1 to save resources in a development environment.
SWIFT_REPLICAS=1
# Data directory for Swift.
SWIFT_DATA_DIR=$DEST/data

# LOGDAYS: Automatically remove old log files after this many days.
LOGDAYS=2

# Optional: You can uncomment and modify these lines to include specific branches of services.
# For most users, this is not necessary unless you're developing on a specific branch.
# CINDER_BRANCH=milestone-proposed
# GLANCE_BRANCH=milestone-proposed
# HORIZON_BRANCH=milestone-proposed
# KEYSTONE_BRANCH=milestone-proposed
# KEYSTONECLIENT_BRANCH=milestone-proposed
# NOVA_BRANCH=milestone-proposed
# NOVACLIENT_BRANCH=milestone-proposed
# NEUTRON_BRANCH=milestone-proposed
# SWIFT_BRANCH=milestone-proposed

# LIBS_FROM_GIT: To install specific client libraries from git.
# e.g., LIBS_FROM_GIT="python-ironicclient"
# IRONICCLIENT_BRANCH=refs/changes/44/2.../1
5.1. HOST_IP 및 FLOATING_RANGE 값 확인 및 선정 기준
HOST_IP 확인:
VM 터미널에서 ip a 명령어를 실행하여 ens33 (또는 해당 네트워크 인터페이스)에 할당된 inet 주소를 확인하고 HOST_IP에 정확히 입력합니다. (예: 222.104.247.38)

FLOATING_RANGE 선정 (Nmap 사용):

VM에 nmap 설치: sudo apt install -y nmap

네트워크 스캔: nmap -sn 222.104.247.0/24 (VM의 IP 대역에 맞게 변경)

스캔 결과 "Host is up"으로 표시되지 않는 IP 대역을 찾습니다. 222.104.247.192/28 (사용 가능한 IP: 222.104.247.193 ~ 222.104.247.206) 대역이 현재 사용 중인 IP들과 거리가 있어 충돌 가능성이 낮으므로 권장됩니다.

6. DevStack 설치 스크립트 실행
local.conf 파일 저장 후, stack.sh 스크립트를 실행하여 DevStack 설치를 시작합니다. 이 과정은 약 30분~1시간 이상 소요될 수 있습니다.

Bash

cd /opt/stack/devstack # devstack 디렉토리로 이동
./stack.sh
6.1. 에러 발생 시 대처법
스크린 세션 확인: DevStack은 screen 세션을 생성합니다. Ctrl+a d로 나간 후 screen -ls로 세션 목록 확인, screen -r [세션 ID]로 재접속하여 에러 발생 서비스의 로그를 확인합니다.

로그 파일 확인: LOGFILE로 지정된 /opt/stack/logs/stack.sh.log 파일을 확인하여 에러 메시지를 찾습니다.

Google 검색: 정확한 에러 메시지로 검색하면 해결책을 찾을 수 있습니다.

clean.sh 후 재시도: 해결이 어렵다면 Ctrl+c로 스크립트를 중지하고, ./clean.sh를 실행하여 환경을 초기화한 후 ./stack.sh를 다시 실행합니다.

7. 설치 완료 및 OpenStack 대시보드 접속
설치가 성공적으로 완료되면, 터미널에 다음과 같은 메시지가 출력됩니다.

This is your host IP address: 222.104.247.38
This is your host IPv6 address: ::1
Horizon is now available at http://222.104.247.38/dashboard
Keystone is serving at http://222.104.247.38/identity/
The default users are: admin and demo
The password: secretopenstack

Services are running under systemd unit files.
For more information see:
https://docs.openstack.org/devstack/latest/systemd.html

DevStack Version: 2025.2
Change: aa988423427d56e7f02879a64aa65319deed9e3b Merge "keystone: Set user_enabled_default for LDAP domain" 2025-07-23 19:41:04 +0000
OS Version: Ubuntu 22.04 jammy
웹 브라우저를 열고 http://222.104.247.38/dashboard 주소로 접속합니다.

Username: admin

Password: secretopenstack
을 입력하여 로그인합니다.

8. 설치 후 관리 (선택 사항)
DevStack 서비스 시작: cd /opt/stack/devstack && ./stack.sh

DevStack 서비스 중지: cd /opt/stack/devstack && ./unstack.sh

DevStack 환경 완전 삭제: cd /opt/stack/devstack && ./clean.sh (이후 재설치를 원하면 git clone부터 다시 시작)
